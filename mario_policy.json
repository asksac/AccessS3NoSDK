{
  "Version": "2012-10-17",
  "Statement": [
      {
          "Sid": "Allow SageMaker access to the bucket and objects",
          "Effect": "Allow",
          "Principal": { "AWS": "837948782356" },
          "Action": [
              "s3:GetObject",
              "s3:PutObject",
              "s3:ListBucket",
              "s3:GetBucketCors",
              "s3:PutBucketCors",
              "s3:SelectObjectContent"              
          ],
          "Resource": [
              "arn:aws:s3:::sagemakercemextest",
              "arn:aws:s3:::sagemakercemextest/*"
          ]
      },
      {
          "Sid": "Deny requests that do not use SSL.",
          "Effect": "Deny",
          "Principal": "*",
          "Action": "s3:*",
          "Resource": [
              "arn:aws:s3:::sagemakercemextest",
              "arn:aws:s3:::sagemakercemextest/*"
          ],
          "Condition": {
              "Bool": {
                  "aws:SecureTransport": "false"
              }
          }
      },
      {
          "Sid": "Deny puts that do not encrypt the object.",
          "Effect": "Deny",
          "Principal": "*",
          "Action": "s3:Put*",
          "Resource": "arn:aws:s3:::sagemakercemextest/*",
          "Condition": {
              "Null": {
                  "s3:x-amz-server-side-encryption": "true"
              }
          }
      },
      {
          "Sid": "Allow requests that use Authorization header for request authentication. Deny POST or presigned URL requests.",
          "Effect": "Deny",
          "Principal": "*",
          "Action": "s3:GetObject",
          "Resource": "arn:aws:s3:::sagemakercemextest/*",
          "Condition": {
              "StringNotEquals": {
                  "s3:authType": "REST-HEADER"
              }
          }
      },
      {
          "Sid": "Deny Anonymous including public ACL when principal type not present",
          "Effect": "Deny",
          "Principal": {
              "AWS": "*"
          },
          "Action": "s3:*",
          "Resource": [
              "arn:aws:s3:::sagemakercemextest",
              "arn:aws:s3:::sagemakercemextest/*"
          ],
          "Condition": {
              "Null": {
                  "aws:principaltype": "true"
              }
          }
      },
      {
          "Sid": "Deny Anonymous including public ACL when principal type is present and set to Anonymous",
          "Effect": "Deny",
          "Principal": {
              "AWS": "*"
          },
          "Action": "s3:*",
          "Resource": [
              "arn:aws:s3:::sagemakercemextest",
              "arn:aws:s3:::sagemakercemextest/*"
          ],
          "Condition": {
              "StringLike": {
                  "aws:principaltype": "Anonymous"
              }
          }
      }
  ]
}